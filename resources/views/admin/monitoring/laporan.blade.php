@extends('layouts.app-dashboard')
@section('title', 'Monitoring Laporan ATM')
@section('nav-links')
<a href="{{ route('admin.dashboard') }}" class="px-4 py-2 rounded-xl text-sm font-semibold text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition-all">Dashboard</a>
<a href="{{ route('admin.monitoring.absensi') }}" class="px-4 py-2 rounded-xl text-sm font-semibold text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition-all">Absensi</a>
<a href="{{ route('admin.monitoring.laporan') }}" class="px-4 py-2 rounded-xl text-sm font-bold bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-md hover:shadow-lg transition-all">Laporan</a>
@endsection
@section('mobile-nav-links')
<a href="{{ route('admin.dashboard') }}" class="block px-4 py-3 rounded-xl text-base font-semibold text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all mb-2">Dashboard</a>
<a href="{{ route('admin.monitoring.absensi') }}" class="block px-4 py-3 rounded-xl text-base font-semibold text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all mb-2">Absensi</a>
<a href="{{ route('admin.monitoring.laporan') }}" class="block px-4 py-3 rounded-xl text-base font-bold bg-gradient-to-r from-blue-500 to-indigo-600 text-white mb-2">Laporan</a>
@endsection
@section('content')
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"><div><h1 class="text-3xl md:text-4xl font-bold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent">ğŸ“‹ Monitoring Laporan ATM</h1><p class="mt-2 text-gray-600">Pantau laporan pembersihan ATM</p></div><a href="{{ route('admin.monitoring.laporan-harian') }}?tanggal={{ request('tanggal', now()->format('Y-m-d')) }}" target="_blank" class="inline-flex items-center justify-center px-5 py-2.5 bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-xl font-bold hover:from-green-600 hover:to-teal-600 transition shadow-lg hover:shadow-xl space-x-2 self-start"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path></svg><span>Print Harian</span></a></div>
<div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6"><div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-6"><div class="flex items-center"><div class="w-14 h-14 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-xl flex items-center justify-center"><svg class="h-7 w-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><div class="ml-4"><p class="text-xs font-bold text-gray-600 uppercase tracking-wider">Total Laporan</p><p class="text-3xl font-black bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">{{ $summary['total_laporan'] }}</p></div></div></div><div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-6"><div class="flex items-center"><div class="w-14 h-14 bg-gradient-to-br from-green-400 to-teal-500 rounded-xl flex items-center justify-center"><svg class="h-7 w-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg></div><div class="ml-4"><p class="text-xs font-bold text-gray-600 uppercase tracking-wider">CS Aktif Hari Ini</p><p class="text-3xl font-black bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent">{{ $summary['total_cs_aktif'] }}</p></div></div></div></div>
<div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-6"><div class="flex items-center space-x-3 mb-4"><div class="w-9 h-9 bg-gradient-to-br from-emerald-100 to-teal-100 rounded-xl flex items-center justify-center"><svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg></div><h3 class="text-base font-bold text-gray-900">ğŸ” Filter Data</h3></div><form method="GET" action="{{ route('admin.monitoring.laporan') }}" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"><div><label for="tanggal" class="block text-xs font-bold text-gray-600 mb-2 uppercase tracking-wider">ğŸ“… Tanggal</label><input type="date" name="tanggal" id="tanggal" value="{{ request('tanggal', now()->format('Y-m-d')) }}" class="w-full px-4 py-2.5 bg-gray-50 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition"></div><div><label for="cs_profile_id" class="block text-xs font-bold text-gray-600 mb-2 uppercase tracking-wider">ğŸ‘¤ CS</label><select name="cs_profile_id" id="cs_profile_id" class="w-full px-4 py-2.5 bg-gray-50 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition"><option value="">Semua CS</option>@foreach($csProfiles as $cs)<option value="{{ $cs->id }}" {{ request('cs_profile_id') == $cs->id ? 'selected' : '' }}>{{ $cs->user->name }}</option>@endforeach</select></div><div><label for="area_id" class="block text-xs font-bold text-gray-600 mb-2 uppercase tracking-wider">ğŸ“ Area</label><select name="area_id" id="area_id" class="w-full px-4 py-2.5 bg-gray-50 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition"><option value="">Semua Area</option>@foreach($areas as $area)<option value="{{ $area->id }}" {{ request('area_id') == $area->id ? 'selected' : '' }}>{{ $area->nama_area }}</option>@endforeach</select></div><div class="flex items-end"><button type="submit" class="w-full px-6 py-2.5 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-xl font-bold hover:from-emerald-600 hover:to-teal-600 transition shadow-lg hover:shadow-xl">Filter</button></div></form></div>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">@forelse($laporans as $laporan)<div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-2xl hover:-translate-y-1 transition-all duration-300"><div class="bg-gradient-to-r from-emerald-500 to-teal-500 px-4 py-3"><div class="flex items-start justify-between"><div class="flex-1 min-w-0"><h3 class="text-white font-bold text-sm truncate">{{ $laporan->atm->nama_atm }}</h3><p class="text-white/80 text-xs truncate">{{ $laporan->atm->area->nama_area }}</p></div><span class="px-3 py-1 bg-white/20 backdrop-blur-sm text-white text-xs font-bold rounded-full">âœ“ Done</span></div></div><div class="p-4 space-y-3"><div class="flex items-center space-x-2"><img src="{{ $laporan->csProfile->foto === 'default-avatar.png' ? 'https://ui-avatars.com/api/?name=' . urlencode($laporan->csProfile->user->name) . '&size=80&background=10b981&color=fff' : asset('storage/' . $laporan->csProfile->foto) }}" alt="{{ $laporan->csProfile->user->name }}" class="w-8 h-8 rounded-full object-cover border-2 border-emerald-300"><div class="flex-1 min-w-0"><p class="text-xs font-bold text-gray-900 truncate">{{ $laporan->csProfile->user->name }}</p><p class="text-xs text-gray-500">{{ $laporan->tanggal->format('d M Y, H:i') }}</p></div></div><div class="grid grid-cols-3 gap-2"><div class="aspect-square bg-gray-100 rounded-xl overflow-hidden border border-gray-200"><img src="{{ asset('storage/' . $laporan->foto_sebelum) }}" alt="Sebelum" class="w-full h-full object-cover"></div><div class="aspect-square bg-gray-100 rounded-xl overflow-hidden border border-gray-200"><img src="{{ asset('storage/' . $laporan->foto_sesudah) }}" alt="Sesudah" class="w-full h-full object-cover"></div><div class="aspect-square bg-gray-100 rounded-xl overflow-hidden border border-gray-200"><img src="{{ asset('storage/' . $laporan->foto_lokasi) }}" alt="Lokasi" class="w-full h-full object-cover"></div></div>@if($laporan->catatan)<div class="p-2 bg-yellow-50 border-l-4 border-yellow-400 rounded-lg"><p class="text-xs text-gray-700 line-clamp-2">ğŸ’¬ {{ $laporan->catatan }}</p></div>@endif<a href="{{ route('admin.monitoring.detail-laporan', $laporan->id) }}" class="block w-full text-center px-4 py-2.5 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-xl text-sm font-bold hover:from-emerald-600 hover:to-teal-600 transition shadow-md">Lihat Detail</a></div></div>@empty<div class="col-span-1 md:col-span-2 lg:col-span-3 bg-white rounded-2xl shadow-lg p-12 text-center"><div class="w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center"><svg class="h-10 w-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h3 class="text-base font-bold text-gray-700">Tidak ada laporan</h3><p class="text-sm text-gray-500 mt-1">Belum ada laporan untuk filter yang dipilih</p></div>@endforelse</div>
@if($laporans->hasPages())<div class="mt-6">{{ $laporans->appends(request()->query())->links() }}</div>@endif
</div>
@endsection
